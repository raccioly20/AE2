{
  "hash": "73921cb0f9cb7f4103dc4551db092aa7",
  "result": {
    "markdown": "---\ntitle: \"Análise Exploratória de Series Temporais\"\nauthor: \"Ricardo Accioly\"\ndate: \"2023-06-07\"\nformat:\n html:\n    code-link: true\n---\n\n\n\n\n## Séries Temporais\n\nNestes exemplos vamos usar algumas bibliotecas do R que são usadas na análise de séries temporais.\n\n## Carregando uma série de um arquivo Excel\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(readxl)\nconsumo_energ <- read_excel(\"e:/Onedrive/github/ae2/semanas/consumo_residencial.xlsx\")\nsummary(consumo_energ)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n      data                        mwh_residencial   \n Min.   :2004-01-01 00:00:00.00   Min.   : 6291091  \n 1st Qu.:2008-09-23 12:00:00.00   1st Qu.: 7954710  \n Median :2013-06-16 00:00:00.00   Median :10275550  \n Mean   :2013-06-16 08:25:15.78   Mean   : 9899939  \n 3rd Qu.:2018-03-08 18:00:00.00   3rd Qu.:11537543  \n Max.   :2022-12-01 00:00:00.00   Max.   :13924000  \n```\n:::\n:::\n\n\n## Transformando os dados para o formato tsibble\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(lubridate)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'lubridate'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:base':\n\n    date, intersect, setdiff, union\n```\n:::\n\n```{.r .cell-code}\nlibrary(tsibble)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'tsibble'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following object is masked from 'package:lubridate':\n\n    interval\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, union\n```\n:::\n\n```{.r .cell-code}\nstr(consumo_energ)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\ntibble [228 × 2] (S3: tbl_df/tbl/data.frame)\n $ data           : POSIXct[1:228], format: \"2004-01-01\" \"2004-02-01\" ...\n $ mwh_residencial: num [1:228] 6780680 6429238 6600338 6809007 6477341 ...\n```\n:::\n\n```{.r .cell-code}\nconsumo_energ$data <- yearmonth(consumo_energ$data)\nc_energ_resid <- as_tsibble(consumo_energ)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nUsing `data` as index variable.\n```\n:::\n\n```{.r .cell-code}\nstr(c_energ_resid)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\ntbl_ts [228 × 2] (S3: tbl_ts/tbl_df/tbl/data.frame)\n $ data           : mth [1:228] 2004 jan, 2004 fev, 2004 mar, 2004 abr, 2004 mai, 2004 jun...\n $ mwh_residencial: num [1:228] 6780680 6429238 6600338 6809007 6477341 ...\n - attr(*, \"key\")= tibble [1 × 1] (S3: tbl_df/tbl/data.frame)\n  ..$ .rows: list<int> [1:1] \n  .. ..$ : int [1:228] 1 2 3 4 5 6 7 8 9 10 ...\n  .. ..@ ptype: int(0) \n - attr(*, \"index\")= chr \"data\"\n  ..- attr(*, \"ordered\")= logi TRUE\n - attr(*, \"index2\")= chr \"data\"\n - attr(*, \"interval\")= interval [1:1] 1M\n  ..@ .regular: logi TRUE\n```\n:::\n:::\n\n\n## Criando Gráficos de Sazonalidade\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(feasts)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nCarregando pacotes exigidos: fabletools\n```\n:::\n\n```{.r .cell-code}\nlibrary(ggplot2)\nc_energ_resid %>% gg_season(log(mwh_residencial))\n```\n\n::: {.cell-output-display}\n![](Aula02_files/figure-html/unnamed-chunk-4-1.png){width=80%}\n:::\n\n```{.r .cell-code}\nc_energ_resid %>% gg_subseries(log(mwh_residencial))\n```\n\n::: {.cell-output-display}\n![](Aula02_files/figure-html/unnamed-chunk-4-2.png){width=80%}\n:::\n:::\n\n\n## Obtendo a autocovariância\n\n\n::: {.cell}\n\n```{.r .cell-code}\nc_energ_resid %>% ACF(log(mwh_residencial)) %>% autoplot()\n```\n\n::: {.cell-output-display}\n![](Aula02_files/figure-html/unnamed-chunk-5-1.png){width=80%}\n:::\n\n```{.r .cell-code}\nc_energ_resid_04_07 <- c_energ_resid %>% filter_index( ~ \"2007-12\")\nc_energ_resid_04_07 %>% ACF(log(mwh_residencial)) %>% autoplot()\n```\n\n::: {.cell-output-display}\n![](Aula02_files/figure-html/unnamed-chunk-5-2.png){width=80%}\n:::\n:::\n",
    "supporting": [
      "Aula02_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}