<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Ricardo Accioly">
<meta name="dcterms.date" content="2022-10-20">

<title>Análise Estatística II - Avaliando Series Temporais</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../semanas/Aula05.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<meta name="twitter:title" content="Análise Estatística II - Avaliando Series Temporais">
<meta name="twitter:description" content="Nestes exemplos vamos usar algumas bibliotecas do R que são usadas na análise de séries temporais financeiras e também na sua modelagem.">
<meta name="twitter:image" content="../images/AE2.png">
<meta name="twitter:creator" content="@r_accioly">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Avaliando Series Temporais</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-center sidebar-header">
      <a href="../index.html" class="sidebar-logo-link">
      <img src="../images/AE2.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
      <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/raccioly20" title="GitHub" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
    <a href="https://twitter.com/r_accioly" title="Twitter" class="sidebar-tool px-1"><i class="bi bi-twitter"></i></a>
  <a href="" class="quarto-color-scheme-toggle sidebar-tool" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false">Informação da disciplina</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../visao-do-curso.html" class="sidebar-item-text sidebar-link">Visão Geral</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">Cronograma</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">Conteúdo Semanal</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../semanas/Aula01.html" class="sidebar-item-text sidebar-link">Aula 01</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../semanas/Aula02.html" class="sidebar-item-text sidebar-link">Aula 02</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../semanas/Aula03.html" class="sidebar-item-text sidebar-link">Aula 03</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../semanas/Aula04.html" class="sidebar-item-text sidebar-link">Aula 04</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../semanas/Aula05.html" class="sidebar-item-text sidebar-link">Aula 05</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../semanas/Aula06.html" class="sidebar-item-text sidebar-link active">Aula 06</a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#séries-temporais" id="toc-séries-temporais" class="nav-link active" data-scroll-target="#séries-temporais">Séries Temporais</a></li>
  <li><a href="#obtendo-e-visualizando-uma-st" id="toc-obtendo-e-visualizando-uma-st" class="nav-link" data-scroll-target="#obtendo-e-visualizando-uma-st">Obtendo e Visualizando uma ST</a></li>
  <li><a href="#vamos-selecionar-somente-o-fechamento-close" id="toc-vamos-selecionar-somente-o-fechamento-close" class="nav-link" data-scroll-target="#vamos-selecionar-somente-o-fechamento-close">Vamos selecionar somente o fechamento (close)</a></li>
  <li><a href="#podemos-extrair-somente-um-ano" id="toc-podemos-extrair-somente-um-ano" class="nav-link" data-scroll-target="#podemos-extrair-somente-um-ano">Podemos extrair somente um ano?</a></li>
  <li><a href="#podemos-extrair-um-intervalo" id="toc-podemos-extrair-um-intervalo" class="nav-link" data-scroll-target="#podemos-extrair-um-intervalo">Podemos extrair um intervalo?</a></li>
  <li><a href="#vamos-trabalhar-com-outro-intervalo" id="toc-vamos-trabalhar-com-outro-intervalo" class="nav-link" data-scroll-target="#vamos-trabalhar-com-outro-intervalo">Vamos trabalhar com outro intervalo</a></li>
  <li><a href="#visualizando-o-início-e-o-fim-da-serie" id="toc-visualizando-o-início-e-o-fim-da-serie" class="nav-link" data-scroll-target="#visualizando-o-início-e-o-fim-da-serie">Visualizando o início e o fim da serie</a></li>
  <li><a href="#usando-o-pacote-astsa" id="toc-usando-o-pacote-astsa" class="nav-link" data-scroll-target="#usando-o-pacote-astsa">Usando o pacote astsa</a></li>
  <li><a href="#esta-série-é-um-ruído-branco" id="toc-esta-série-é-um-ruído-branco" class="nav-link" data-scroll-target="#esta-série-é-um-ruído-branco">Esta série é um ruído branco?</a></li>
  <li><a href="#vamos-agora-trabalhar-com-os-log-retornos-das-ações" id="toc-vamos-agora-trabalhar-com-os-log-retornos-das-ações" class="nav-link" data-scroll-target="#vamos-agora-trabalhar-com-os-log-retornos-das-ações">Vamos agora trabalhar com os log retornos das ações</a></li>
  <li><a href="#esta-série-é-um-ruído-branco-1" id="toc-esta-série-é-um-ruído-branco-1" class="nav-link" data-scroll-target="#esta-série-é-um-ruído-branco-1">Esta série é um ruído branco?</a></li>
  <li><a href="#vamos-avaliar-de-outra-forma" id="toc-vamos-avaliar-de-outra-forma" class="nav-link" data-scroll-target="#vamos-avaliar-de-outra-forma">Vamos avaliar de outra forma</a></li>
  <li><a href="#podemos-agragar-valores-diários-de-diversas-formas" id="toc-podemos-agragar-valores-diários-de-diversas-formas" class="nav-link" data-scroll-target="#podemos-agragar-valores-diários-de-diversas-formas">Podemos agragar valores diários de diversas formas</a></li>
  <li><a href="#os-log-retornos-seguem-uma-distribuição-normal" id="toc-os-log-retornos-seguem-uma-distribuição-normal" class="nav-link" data-scroll-target="#os-log-retornos-seguem-uma-distribuição-normal">Os log retornos seguem uma distribuição normal?</a></li>
  <li><a href="#outra-avaliação-jarque-bera" id="toc-outra-avaliação-jarque-bera" class="nav-link" data-scroll-target="#outra-avaliação-jarque-bera">Outra avaliação Jarque-Bera</a></li>
  <li><a href="#e-o-log-retorno-semanal" id="toc-e-o-log-retorno-semanal" class="nav-link" data-scroll-target="#e-o-log-retorno-semanal">E o log retorno semanal?</a></li>
  <li><a href="#outra-avaliação-jarque-bera-1" id="toc-outra-avaliação-jarque-bera-1" class="nav-link" data-scroll-target="#outra-avaliação-jarque-bera-1">Outra avaliação Jarque-Bera</a></li>
  <li><a href="#vamos-simular-um-processo-ar1" id="toc-vamos-simular-um-processo-ar1" class="nav-link" data-scroll-target="#vamos-simular-um-processo-ar1">Vamos simular um processo AR(1)</a></li>
  <li><a href="#vamos-simular-um-processo-ma1" id="toc-vamos-simular-um-processo-ma1" class="nav-link" data-scroll-target="#vamos-simular-um-processo-ma1">Vamos simular um processo MA(1)</a></li>
  <li><a href="#vamos-simular-um-ar2" id="toc-vamos-simular-um-ar2" class="nav-link" data-scroll-target="#vamos-simular-um-ar2">Vamos simular um AR(2)</a></li>
  <li><a href="#vamos-analisar-dados-de-recrutamento" id="toc-vamos-analisar-dados-de-recrutamento" class="nav-link" data-scroll-target="#vamos-analisar-dados-de-recrutamento">Vamos analisar dados de Recrutamento</a></li>
  <li><a href="#que-tal-um-ar2" id="toc-que-tal-um-ar2" class="nav-link" data-scroll-target="#que-tal-um-ar2">Que tal um AR(2)</a></li>
  <li><a href="#previsões-a-partir-do-modelo-ajustado" id="toc-previsões-a-partir-do-modelo-ajustado" class="nav-link" data-scroll-target="#previsões-a-partir-do-modelo-ajustado">Previsões a partir do modelo ajustado</a></li>
  <li><a href="#usando-a-biblioteca-astsa" id="toc-usando-a-biblioteca-astsa" class="nav-link" data-scroll-target="#usando-a-biblioteca-astsa">Usando a biblioteca ASTSA</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">Avaliando Series Temporais</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Ricardo Accioly </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 20, 2022</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># parametros para imagens</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">fig.width =</span> <span class="dv">8</span>,</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">fig.asp =</span> <span class="fl">0.618</span>,</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">fig.retina =</span> <span class="dv">3</span>,</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">dpi =</span> <span class="dv">300</span>,</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">out.width =</span> <span class="st">"80%"</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="séries-temporais" class="level2">
<h2 class="anchored" data-anchor-id="séries-temporais">Séries Temporais</h2>
<p>Nestes exemplos vamos usar algumas bibliotecas do R que são usadas na análise de séries temporais financeiras e também na sua modelagem.</p>
</section>
<section id="obtendo-e-visualizando-uma-st" class="level2">
<h2 class="anchored" data-anchor-id="obtendo-e-visualizando-uma-st">Obtendo e Visualizando uma ST</h2>
<p>Vamos inicialmente usando a biblioteca (pacote) quantmod fazer um download dos preços da Petrobras (PETR4) entre 2000 e 2022.</p>
<p>A biblioteca quantmod depende dos pacotes xts e do zoo que são dois pacotes usados para manipular dados de series temporais.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quantmod)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Carregando pacotes exigidos: xts</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Carregando pacotes exigidos: zoo</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'zoo'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    as.Date, as.Date.numeric</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Carregando pacotes exigidos: TTR</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Registered S3 method overwritten by 'quantmod':
  method            from
  as.zoo.data.frame zoo </code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getSymbols</span>(<span class="st">"PETR4.SA"</span>,<span class="at">from=</span><span class="st">"2000-01-01"</span>, <span class="at">to=</span><span class="st">"2022-09-30"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: PETR4.SA contains missing values. Some functions will not work if
objects contain missing values in the middle of the series. Consider using
na.omit(), na.approx(), na.fill(), etc to remove or replace them.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "PETR4.SA"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(PETR4.SA)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           PETR4.SA.Open PETR4.SA.High PETR4.SA.Low PETR4.SA.Close
2000-01-03         5.875         5.875        5.875          5.875
2000-01-04         5.550         5.550        5.550          5.550
2000-01-05         5.494         5.494        5.494          5.494
2000-01-06         5.475         5.475        5.475          5.475
2000-01-07         5.500         5.500        5.500          5.500
2000-01-10         5.613         5.613        5.613          5.613
           PETR4.SA.Volume PETR4.SA.Adjusted
2000-01-03     35389440000          2.139588
2000-01-04     28861440000          2.021228
2000-01-05     43033600000          2.000833
2000-01-06     34055680000          1.993914
2000-01-07     20912640000          2.003018
2000-01-10     19563520000          2.044172</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A biblioteca tem uma forma diferenciada de apresentação das series financeiras</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">chartSeries</span>(PETR4.SA,<span class="at">theme=</span><span class="st">"white"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Aula06_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" style="width:80.0%"></p>
</div>
</div>
<p>Veja que os dados recebidos tem valores de abertura (open), alta (high), baixa (low) e fechamento (close)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(PETR4.SA)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Index            PETR4.SA.Open   PETR4.SA.High    PETR4.SA.Low   
 Min.   :2000-01-03   Min.   : 4.20   Min.   : 4.27   Min.   : 4.120  
 1st Qu.:2005-07-04   1st Qu.:10.15   1st Qu.:10.35   1st Qu.: 9.969  
 Median :2011-03-28   Median :19.09   Median :19.39   Median :18.765  
 Mean   :2011-04-09   Mean   :18.92   Mean   :19.20   Mean   :18.617  
 3rd Qu.:2017-01-03   3rd Qu.:26.05   3rd Qu.:26.43   3rd Qu.:25.650  
 Max.   :2022-09-29   Max.   :67.50   Max.   :67.50   Max.   :51.950  
                      NA's   :1       NA's   :1       NA's   :1       
 PETR4.SA.Close  PETR4.SA.Volume     PETR4.SA.Adjusted
 Min.   : 4.20   Min.   :0.000e+00   Min.   : 1.593   
 1st Qu.:10.11   1st Qu.:2.113e+07   1st Qu.: 4.263   
 Median :19.10   Median :3.374e+07   Median : 8.625   
 Mean   :18.89   Mean   :5.644e+08   Mean   : 8.904   
 3rd Qu.:26.00   3rd Qu.:5.434e+07   3rd Qu.:12.128   
 Max.   :52.51   Max.   :7.356e+10   Max.   :34.480   
 NA's   :1       NA's   :1           NA's   :1        </code></pre>
</div>
</div>
</section>
<section id="vamos-selecionar-somente-o-fechamento-close" class="level2">
<h2 class="anchored" data-anchor-id="vamos-selecionar-somente-o-fechamento-close">Vamos selecionar somente o fechamento (close)</h2>
<p>Para trabalhar com somente uma das series vamos selecionar sua coluna de dados</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>PETR4.SA.Close <span class="ot">&lt;-</span> PETR4.SA[,<span class="st">"PETR4.SA.Close"</span>]</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">chartSeries</span>(PETR4.SA.Close,<span class="at">theme=</span><span class="st">"white"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Aula06_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" style="width:80.0%"></p>
</div>
</div>
</section>
<section id="podemos-extrair-somente-um-ano" class="level2">
<h2 class="anchored" data-anchor-id="podemos-extrair-somente-um-ano">Podemos extrair somente um ano?</h2>
<p>Vamos usar os dados de 2000.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>PETR4_2000 <span class="ot">&lt;-</span> PETR4.SA.Close[<span class="st">"2000"</span>]</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">chartSeries</span>(PETR4_2000,<span class="at">theme=</span><span class="st">"white"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Aula06_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" style="width:80.0%"></p>
</div>
</div>
</section>
<section id="podemos-extrair-um-intervalo" class="level2">
<h2 class="anchored" data-anchor-id="podemos-extrair-um-intervalo">Podemos extrair um intervalo?</h2>
<p>Vamos usar os dados de 2000 a 2001.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>PETR4_2000_2001 <span class="ot">&lt;-</span> PETR4.SA.Close[<span class="st">"2000/2001"</span>] </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">chartSeries</span>(PETR4_2000_2001,<span class="at">theme=</span><span class="st">"white"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Aula06_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" style="width:80.0%"></p>
</div>
</div>
</section>
<section id="vamos-trabalhar-com-outro-intervalo" class="level2">
<h2 class="anchored" data-anchor-id="vamos-trabalhar-com-outro-intervalo">Vamos trabalhar com outro intervalo</h2>
<p>Vamos usar dados de set/21 a set/22.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>PETR4.SA.Close <span class="ot">&lt;-</span> PETR4.SA.Close[<span class="st">"2021-09-01/2022-09-30"</span>]</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">chartSeries</span>(PETR4.SA.Close,<span class="at">theme=</span><span class="st">"white"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Aula06_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" style="width:80.0%"></p>
</div>
</div>
</section>
<section id="visualizando-o-início-e-o-fim-da-serie" class="level2">
<h2 class="anchored" data-anchor-id="visualizando-o-início-e-o-fim-da-serie">Visualizando o início e o fim da serie</h2>
<p>Aqui vamos usar funções da xts visualizar diferentes periodos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">first</span>(PETR4.SA.Close, <span class="st">"month"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           PETR4.SA.Close
2021-09-01          27.04
2021-09-02          26.60
2021-09-03          26.33
2021-09-06          26.46
2021-09-08          24.97
2021-09-09          25.50
2021-09-10          25.34
2021-09-13          26.23
2021-09-14          25.88
2021-09-15          26.33
2021-09-16          26.10
2021-09-17          24.93
2021-09-20          24.65
2021-09-21          25.21
2021-09-22          25.85
2021-09-23          26.84
2021-09-24          26.90
2021-09-27          27.14
2021-09-28          26.96
2021-09-29          27.39
2021-09-30          27.23</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">last</span>(PETR4.SA.Close, <span class="st">"6 weeks"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           PETR4.SA.Close
2022-08-22          32.41
2022-08-23          33.44
2022-08-24          33.64
2022-08-25          33.28
2022-08-26          33.64
2022-08-29          34.48
2022-08-30          32.43
2022-08-31          33.23
2022-09-01          33.85
2022-09-02          33.42
2022-09-05          33.34
2022-09-06          32.10
2022-09-08          31.80
2022-09-09          31.79
2022-09-12          31.48
2022-09-13          30.65
2022-09-14          31.12
2022-09-15          31.06
2022-09-16          30.78
2022-09-19          31.27
2022-09-20          31.09
2022-09-21          31.17
2022-09-22          31.94
2022-09-23          29.94
2022-09-26          29.29
2022-09-27          29.67
2022-09-28          29.27
2022-09-29          29.31</code></pre>
</div>
</div>
</section>
<section id="usando-o-pacote-astsa" class="level2">
<h2 class="anchored" data-anchor-id="usando-o-pacote-astsa">Usando o pacote astsa</h2>
<p>Vamos usar algumas funcionalidades do pacote astsa que permite visualizações e modelagem de series temporais.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(astsa)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">lag1.plot</span>(PETR4.SA.Close,<span class="dv">12</span>, <span class="at">col=</span><span class="fu">astsa.col</span>(<span class="dv">4</span>, .<span class="dv">3</span>), <span class="at">pch=</span><span class="dv">20</span>, <span class="at">cex=</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Aula06_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" style="width:80.0%"></p>
</div>
</div>
</section>
<section id="esta-série-é-um-ruído-branco" class="level2">
<h2 class="anchored" data-anchor-id="esta-série-é-um-ruído-branco">Esta série é um ruído branco?</h2>
<p>Primeiro vamos ver graficamente o FAC/ACF e a FACP/PACF e depois vamos usar o teste de Box-Pierce e Ljung-Box.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">acf2</span>(PETR4.SA.Close)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Aula06_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" style="width:80.0%"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1]  [,2] [,3] [,4]  [,5]  [,6] [,7]  [,8]  [,9] [,10] [,11] [,12] [,13]
ACF  0.95  0.90 0.86 0.82  0.78  0.73 0.69  0.65  0.60  0.56  0.52  0.49  0.45
PACF 0.95 -0.01 0.05 0.00 -0.02 -0.03 0.00 -0.06 -0.08  0.01  0.05 -0.04  0.00
     [,14] [,15] [,16] [,17] [,18] [,19] [,20] [,21] [,22] [,23] [,24] [,25]
ACF   0.41  0.39  0.37  0.35  0.33  0.31  0.30  0.29  0.27  0.25  0.24  0.22
PACF -0.03  0.08  0.05  0.02 -0.04  0.03  0.07 -0.03 -0.09 -0.04  0.05 -0.07
     [,26] [,27]
ACF   0.21  0.20
PACF  0.11 -0.05</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Box.test</span>(PETR4.SA.Close, <span class="at">lag=</span><span class="dv">20</span>, <span class="at">type =</span> <span class="st">"Box-Pierce"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Box-Pierce test

data:  PETR4.SA.Close
X-squared = 2004.7, df = 20, p-value &lt; 2.2e-16</code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Box.test</span>(PETR4.SA.Close, <span class="at">lag=</span><span class="dv">20</span>, <span class="at">type =</span> <span class="st">"Ljung-Box"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Box-Ljung test

data:  PETR4.SA.Close
X-squared = 2071.8, df = 20, p-value &lt; 2.2e-16</code></pre>
</div>
</div>
</section>
<section id="vamos-agora-trabalhar-com-os-log-retornos-das-ações" class="level2">
<h2 class="anchored" data-anchor-id="vamos-agora-trabalhar-com-os-log-retornos-das-ações">Vamos agora trabalhar com os log retornos das ações</h2>
<p>Para obter os log retornos vamos usar uma função da biblioteca qrmtools.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(qrmtools)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>petr4.logret <span class="ot">&lt;-</span> <span class="fu">returns</span>(PETR4.SA.Close, <span class="at">method=</span><span class="st">"logarithmic"</span>)</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(petr4.logret)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                   [,1]
2021-09-02 -0.016406072
2021-09-03 -0.010202242
2021-09-06  0.004925147
2021-09-08 -0.057959057
2021-09-09  0.021003388
2021-09-10 -0.006294277</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">chartSeries</span>(petr4.logret,<span class="at">theme=</span><span class="st">"white"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Aula06_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" style="width:80.0%"></p>
</div>
</div>
</section>
<section id="esta-série-é-um-ruído-branco-1" class="level2">
<h2 class="anchored" data-anchor-id="esta-série-é-um-ruído-branco-1">Esta série é um ruído branco?</h2>
<p>Vamos usar o teste de Box-Pierce e Ljung-Box</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">acf2</span>(petr4.logret)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Aula06_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" style="width:80.0%"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>      [,1]  [,2]  [,3]  [,4] [,5]  [,6] [,7] [,8]  [,9] [,10] [,11] [,12] [,13]
ACF  -0.03 -0.07 -0.02 -0.01 0.03 -0.04 0.04 0.07 -0.03 -0.08 -0.01 -0.03  0.02
PACF -0.03 -0.08 -0.03 -0.02 0.02 -0.04 0.04 0.07 -0.02 -0.07 -0.01 -0.04  0.01
     [,14] [,15] [,16] [,17] [,18] [,19] [,20] [,21] [,22] [,23] [,24] [,25]
ACF  -0.08 -0.06 -0.01  0.03 -0.05 -0.07  0.02  0.09  0.04 -0.07  0.05 -0.13
PACF -0.09 -0.07 -0.03  0.02 -0.05 -0.07  0.00  0.08  0.05 -0.05  0.04 -0.15
     [,26] [,27]
ACF   0.03 -0.10
PACF  0.03 -0.12</code></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Box.test</span>(petr4.logret, <span class="at">lag=</span><span class="dv">20</span>, <span class="at">type =</span> <span class="st">"Box-Pierce"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Box-Pierce test

data:  petr4.logret
X-squared = 11.561, df = 20, p-value = 0.9304</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Box.test</span>(petr4.logret, <span class="at">lag=</span><span class="dv">20</span>, <span class="at">type =</span> <span class="st">"Ljung-Box"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Box-Ljung test

data:  petr4.logret
X-squared = 12.146, df = 20, p-value = 0.9109</code></pre>
</div>
</div>
</section>
<section id="vamos-avaliar-de-outra-forma" class="level2">
<h2 class="anchored" data-anchor-id="vamos-avaliar-de-outra-forma">Vamos avaliar de outra forma</h2>
<p>No teste anterior usamos somente o lag = 20 para testar a série. Vamos usar a biblioteca astsa que faz este teste para vários lags além de avaliar outras características da série.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sarima</span>(petr4.logret,<span class="at">p=</span><span class="dv">0</span>,<span class="at">d=</span><span class="dv">0</span>,<span class="at">q=</span><span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>initial  value -3.635431 
iter   1 value -3.635431
final  value -3.635431 
converged
initial  value -3.635431 
iter   1 value -3.635431
final  value -3.635431 
converged</code></pre>
</div>
<div class="cell-output-display">
<p><img src="Aula06_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" style="width:80.0%"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>$fit

Call:
arima(x = xdata, order = c(p, d, q), seasonal = list(order = c(P, D, Q), period = S), 
    xreg = xmean, include.mean = FALSE, transform.pars = trans, fixed = fixed, 
    optim.control = list(trace = trc, REPORT = 1, reltol = tol))

Coefficients:
       xmean
      0.0003
s.e.  0.0016

sigma^2 estimated as 0.0006955:  log likelihood = 596.24,  aic = -1188.47

$degrees_of_freedom
[1] 268

$ttable
      Estimate     SE t.value p.value
xmean    3e-04 0.0016  0.1862  0.8524

$AIC
[1] -4.418115

$AICc
[1] -4.418059

$BIC
[1] -4.391389</code></pre>
</div>
</div>
</section>
<section id="podemos-agragar-valores-diários-de-diversas-formas" class="level2">
<h2 class="anchored" data-anchor-id="podemos-agragar-valores-diários-de-diversas-formas">Podemos agragar valores diários de diversas formas</h2>
<p>Para agregar valores de series temporais vamos usar a biblioteca xts</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(xts)</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>petr4.logret.sem <span class="ot">&lt;-</span> <span class="fu">apply.weekly</span>(petr4.logret, sum)</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="fu">first</span>(petr4.logret.sem, <span class="st">"2 week"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                  [,1]
2021-09-03 -0.02660831
2021-09-10 -0.03832480</code></pre>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>petr4.logret.men <span class="ot">&lt;-</span> <span class="fu">apply.monthly</span>(petr4.logret, sum)</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="fu">first</span>(petr4.logret.men, <span class="st">"2 month"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                   [,1]
2021-09-30  0.007002019
2021-10-29 -0.002942260</code></pre>
</div>
</div>
</section>
<section id="os-log-retornos-seguem-uma-distribuição-normal" class="level2">
<h2 class="anchored" data-anchor-id="os-log-retornos-seguem-uma-distribuição-normal">Os log retornos seguem uma distribuição normal?</h2>
<p>Vamos usar alguma ferrametas gráficas para avaliar os dados de log-retorno</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>mu <span class="ot">&lt;-</span> <span class="fu">mean</span>(petr4.logret)</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>sigma <span class="ot">&lt;-</span> <span class="fu">sd</span>(petr4.logret)</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(mu, sigma)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.0002996708 0.0264217221</code></pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">sort</span>(<span class="fu">coredata</span>(petr4.logret))</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(x, <span class="at">breaks =</span> <span class="st">"Sturges"</span> , <span class="at">probability =</span> <span class="cn">TRUE</span>)</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(x, <span class="fu">dnorm</span>(x, <span class="at">mean =</span> mu, <span class="at">sd =</span> sigma), <span class="at">col =</span> <span class="st">"red"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Aula06_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" style="width:80.0%"></p>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">qqnorm</span>(x)</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="fu">qqline</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Aula06_files/figure-html/unnamed-chunk-15-2.png" class="img-fluid" style="width:80.0%"></p>
</div>
</div>
</section>
<section id="outra-avaliação-jarque-bera" class="level2">
<h2 class="anchored" data-anchor-id="outra-avaliação-jarque-bera">Outra avaliação Jarque-Bera</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(moments)</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">sort</span>(<span class="fu">coredata</span>(petr4.logret))</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="fu">jarque.test</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Jarque-Bera Normality Test

data:  x
JB = 367.04, p-value &lt; 2.2e-16
alternative hypothesis: greater</code></pre>
</div>
</div>
</section>
<section id="e-o-log-retorno-semanal" class="level2">
<h2 class="anchored" data-anchor-id="e-o-log-retorno-semanal">E o log retorno semanal?</h2>
<p>Vamos usar alguma ferrametas gráficas para avaliar os dados de log-retorno</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>mu <span class="ot">&lt;-</span> <span class="fu">mean</span>(petr4.logret.sem)</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>sigma <span class="ot">&lt;-</span> <span class="fu">sd</span>(petr4.logret.sem)</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(mu, sigma)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.001414236 0.052515186</code></pre>
</div>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">sort</span>(<span class="fu">coredata</span>(petr4.logret.sem))</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(x, <span class="at">breaks =</span> <span class="st">"Sturges"</span> , <span class="at">probability =</span> <span class="cn">TRUE</span>)</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(x, <span class="fu">dnorm</span>(x, <span class="at">mean =</span> mu, <span class="at">sd =</span> sigma), <span class="at">col =</span> <span class="st">"red"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Aula06_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid" style="width:80.0%"></p>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">qqnorm</span>(x)</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="fu">qqline</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Aula06_files/figure-html/unnamed-chunk-17-2.png" class="img-fluid" style="width:80.0%"></p>
</div>
</div>
</section>
<section id="outra-avaliação-jarque-bera-1" class="level2">
<h2 class="anchored" data-anchor-id="outra-avaliação-jarque-bera-1">Outra avaliação Jarque-Bera</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(moments)</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">sort</span>(<span class="fu">coredata</span>(petr4.logret.sem))</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a><span class="fu">jarque.test</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Jarque-Bera Normality Test

data:  x
JB = 1.0108, p-value = 0.6033
alternative hypothesis: greater</code></pre>
</div>
</div>
</section>
<section id="vamos-simular-um-processo-ar1" class="level2">
<h2 class="anchored" data-anchor-id="vamos-simular-um-processo-ar1">Vamos simular um processo AR(1)</h2>
<p>Vamos usar as funções da biblioteca astsa.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>))                         </span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="co"># na expressão abaixo ~ é igual a um espaço e == é o igual</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tsplot</span>(<span class="fu">sarima.sim</span>(<span class="at">ar=</span> .<span class="dv">9</span>, <span class="at">n=</span><span class="dv">100</span>), <span class="at">col=</span><span class="dv">4</span>, <span class="at">ylab=</span><span class="st">""</span>, <span class="at">main=</span>(<span class="fu">expression</span>(<span class="fu">AR</span>(<span class="dv">1</span>)<span class="sc">~</span><span class="er">~~</span>phi<span class="sc">==+</span>.<span class="dv">9</span>))) </span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="fu">tsplot</span>(<span class="fu">sarima.sim</span>(<span class="at">ar=</span><span class="sc">-</span>.<span class="dv">9</span>, <span class="at">n=</span><span class="dv">100</span>), <span class="at">col=</span><span class="dv">4</span>, <span class="at">ylab=</span><span class="st">""</span>, <span class="at">main=</span>(<span class="fu">expression</span>(<span class="fu">AR</span>(<span class="dv">1</span>)<span class="sc">~</span><span class="er">~~</span>phi<span class="sc">==-</span>.<span class="dv">9</span>))) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Aula06_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid" style="width:80.0%"></p>
</div>
</div>
</section>
<section id="vamos-simular-um-processo-ma1" class="level2">
<h2 class="anchored" data-anchor-id="vamos-simular-um-processo-ma1">Vamos simular um processo MA(1)</h2>
<p>Vamos usar as funções da biblioteca astsa.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>))                                   </span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tsplot</span>(<span class="fu">sarima.sim</span>(<span class="at">ma=</span> .<span class="dv">9</span>, <span class="at">n=</span><span class="dv">100</span>), <span class="at">col=</span><span class="dv">4</span>, <span class="at">ylab=</span><span class="st">""</span>, <span class="at">main=</span>(<span class="fu">expression</span>(<span class="fu">MA</span>(<span class="dv">1</span>)<span class="sc">~</span><span class="er">~~</span>theta<span class="sc">==+</span>.<span class="dv">9</span>)))    </span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tsplot</span>(<span class="fu">sarima.sim</span>(<span class="at">ma=</span><span class="sc">-</span>.<span class="dv">9</span>, <span class="at">n=</span><span class="dv">100</span>), <span class="at">col=</span><span class="dv">4</span>, <span class="at">ylab=</span><span class="st">""</span>, <span class="at">main=</span>(<span class="fu">expression</span>(<span class="fu">MA</span>(<span class="dv">1</span>)<span class="sc">~</span><span class="er">~~</span>theta<span class="sc">==-</span>.<span class="dv">9</span>)))    </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Aula06_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid" style="width:80.0%"></p>
</div>
</div>
</section>
<section id="vamos-simular-um-ar2" class="level2">
<h2 class="anchored" data-anchor-id="vamos-simular-um-ar2">Vamos simular um AR(2)</h2>
<p>Vamos usar outra função básica do R para simular um AR(2) para fazer a representação gráfica de um AR(2) através dos seus ACF e PACF.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>acf <span class="ot">&lt;-</span> <span class="fu">ARMAacf</span>(<span class="at">ar=</span><span class="fu">c</span>(<span class="fl">1.5</span>,<span class="sc">-</span>.<span class="dv">75</span>), <span class="at">ma=</span><span class="dv">0</span>, <span class="dv">24</span>)</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>pacf <span class="ot">&lt;-</span> <span class="fu">ARMAacf</span>(<span class="at">ar=</span><span class="fu">c</span>(<span class="fl">1.5</span>,<span class="sc">-</span>.<span class="dv">75</span>), <span class="at">ma=</span><span class="dv">0</span>, <span class="dv">24</span>, <span class="at">pacf=</span>T)</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(acf, <span class="at">type=</span><span class="st">"h"</span>, <span class="at">xlab=</span><span class="st">"lag"</span>)</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h=</span><span class="dv">0</span>)</span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(pacf, <span class="at">type=</span><span class="st">"h"</span>, <span class="at">xlab=</span><span class="st">"lag"</span>)</span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h=</span><span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Aula06_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid" style="width:80.0%"></p>
</div>
</div>
</section>
<section id="vamos-analisar-dados-de-recrutamento" class="level2">
<h2 class="anchored" data-anchor-id="vamos-analisar-dados-de-recrutamento">Vamos analisar dados de Recrutamento</h2>
<p>Recrutamento (índice do número de novos peixes) por um período de 453 meses que se passaram ao longo dos anos 1950-1987. O recrutamento é vagamente definido como um indicador de novos membros de uma população para a primeira fase de vida em que a mortalidade natural se estabiliza perto dos níveis adultos.</p>
<p>Estes dados estão na biblioteca astsa.</p>
<p>Vamos usar uma parte para ajustar o modelo e depois vamos ver como ficam as previsões com relação aos resultados reais.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># library(astsa)</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(rec)</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>recr <span class="ot">&lt;-</span> <span class="fu">window</span>(rec, <span class="at">start=</span><span class="fu">c</span>(<span class="dv">1950</span>,<span class="dv">1</span>), <span class="at">end=</span><span class="fu">c</span>(<span class="dv">1985</span>,<span class="dv">9</span>))</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>))</span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a><span class="fu">acf</span>(recr, <span class="dv">24</span>)</span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a><span class="fu">pacf</span>(recr, <span class="dv">24</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Aula06_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid" style="width:80.0%"></p>
</div>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">acf2</span>(recr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Aula06_files/figure-html/unnamed-chunk-22-2.png" class="img-fluid" style="width:80.0%"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1]  [,2]  [,3]  [,4] [,5]  [,6]  [,7] [,8] [,9] [,10] [,11] [,12] [,13]
ACF  0.92  0.79  0.64  0.49 0.37  0.27  0.19 0.13 0.09  0.06  0.04  0.00 -0.07
PACF 0.92 -0.45 -0.04 -0.02 0.08 -0.05 -0.05 0.04 0.05 -0.03 -0.06 -0.15 -0.15
     [,14] [,15] [,16] [,17] [,18] [,19] [,20] [,21] [,22] [,23] [,24] [,25]
ACF  -0.14 -0.21 -0.26 -0.29 -0.28 -0.25 -0.20 -0.12 -0.04  0.02  0.05  0.04
PACF -0.02  0.02 -0.01  0.03  0.04  0.09  0.09  0.03 -0.02 -0.04 -0.05 -0.13
     [,26] [,27] [,28] [,29] [,30] [,31] [,32] [,33] [,34] [,35] [,36] [,37]
ACF   0.01 -0.02 -0.06 -0.09 -0.11 -0.12 -0.10 -0.06  0.01  0.07  0.09  0.08
PACF -0.03  0.06 -0.09 -0.05 -0.02  0.06  0.03  0.13  0.08 -0.02 -0.10 -0.07
     [,38] [,39] [,40] [,41] [,42] [,43] [,44] [,45] [,46] [,47] [,48]
ACF   0.04  0.00 -0.02 -0.03 -0.03 -0.02  0.00  0.04  0.09  0.14  0.17
PACF  0.03  0.02  0.07 -0.04 -0.02 -0.04  0.05  0.01  0.04  0.10 -0.04</code></pre>
</div>
</div>
</section>
<section id="que-tal-um-ar2" class="level2">
<h2 class="anchored" data-anchor-id="que-tal-um-ar2">Que tal um AR(2)</h2>
<p>Aqui usando comandos básicos do R.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>q <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>mod1 <span class="ot">&lt;-</span> <span class="fu">arima</span>(recr,<span class="at">order=</span><span class="fu">c</span>(p,d,q),<span class="at">method=</span><span class="st">"ML"</span>)</span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tsdiag</span>(mod1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Aula06_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid" style="width:80.0%"></p>
</div>
</div>
</section>
<section id="previsões-a-partir-do-modelo-ajustado" class="level2">
<h2 class="anchored" data-anchor-id="previsões-a-partir-do-modelo-ajustado">Previsões a partir do modelo ajustado</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>rec.pr <span class="ot">&lt;-</span> <span class="fu">predict</span>(mod1, <span class="at">n.ahead=</span><span class="dv">24</span>)</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>inf <span class="ot">&lt;-</span> rec.pr<span class="sc">$</span>pred <span class="sc">+</span> rec.pr<span class="sc">$</span>se</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>sup <span class="ot">&lt;-</span> rec.pr<span class="sc">$</span>pred <span class="sc">-</span> rec.pr<span class="sc">$</span>se</span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a><span class="fu">tsplot</span>(recr, <span class="at">type=</span><span class="st">"o"</span>, <span class="at">ylab=</span><span class="st">"recrutamento"</span>, <span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">1980</span>,<span class="dv">1988</span>))</span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(rec.pr<span class="sc">$</span>pred, <span class="at">col=</span><span class="st">"red"</span>, <span class="at">type=</span><span class="st">"o"</span>)</span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(inf, <span class="at">col=</span><span class="st">"blue"</span>, <span class="at">lty=</span><span class="st">"dashed"</span>)</span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(sup, <span class="at">col=</span><span class="st">"blue"</span>, <span class="at">lty=</span><span class="st">"dashed"</span>)</span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(rec)</span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h=</span><span class="fu">coef</span>(mod1)[<span class="fu">names</span>(<span class="fu">coef</span>(mod1))<span class="sc">==</span><span class="st">'intercept'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Aula06_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid" style="width:80.0%"></p>
</div>
</div>
</section>
<section id="usando-a-biblioteca-astsa" class="level2">
<h2 class="anchored" data-anchor-id="usando-a-biblioteca-astsa">Usando a biblioteca ASTSA</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>q <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sarima</span>(recr,<span class="at">p=</span>p,<span class="at">d=</span>d,<span class="at">q=</span>q, <span class="at">gg=</span><span class="cn">TRUE</span>, <span class="at">col=</span><span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>initial  value 3.335343 
iter   2 value 3.264072
iter   3 value 2.562334
iter   4 value 2.425870
iter   5 value 2.258615
iter   6 value 2.254532
iter   7 value 2.253817
iter   8 value 2.253804
iter   9 value 2.253802
iter  10 value 2.253799
iter  11 value 2.253799
iter  12 value 2.253799
iter  13 value 2.253798
iter  14 value 2.253797
iter  15 value 2.253797
iter  15 value 2.253797
final  value 2.253797 
converged
initial  value 2.254327 
iter   2 value 2.254322
iter   3 value 2.254320
iter   4 value 2.254319
iter   5 value 2.254319
iter   6 value 2.254319
iter   7 value 2.254319
iter   8 value 2.254318
iter   9 value 2.254318
iter   9 value 2.254318
iter   9 value 2.254318
final  value 2.254318 
converged</code></pre>
</div>
<div class="cell-output-display">
<p><img src="Aula06_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid" style="width:80.0%"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>$fit

Call:
arima(x = xdata, order = c(p, d, q), seasonal = list(order = c(P, D, Q), period = S), 
    xreg = xmean, include.mean = FALSE, transform.pars = trans, fixed = fixed, 
    optim.control = list(trace = trc, REPORT = 1, reltol = tol))

Coefficients:
         ar1      ar2    xmean
      1.3418  -0.4516  61.9062
s.e.  0.0429   0.0429   4.1418

sigma^2 estimated as 90.29:  log likelihood = -1575.83,  aic = 3159.65

$degrees_of_freedom
[1] 426

$ttable
      Estimate     SE  t.value p.value
ar1     1.3418 0.0429  31.2549       0
ar2    -0.4516 0.0429 -10.5159       0
xmean  61.9062 4.1418  14.9468       0

$AIC
[1] 7.365161

$AICc
[1] 7.365293

$BIC
[1] 7.40303</code></pre>
</div>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sarima.for</span>(recr, <span class="at">n.ahead=</span><span class="dv">24</span>, <span class="at">p=</span><span class="dv">2</span>, <span class="at">d=</span><span class="dv">0</span>, <span class="at">q=</span><span class="dv">0</span>, <span class="at">plot=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$pred
          Jan      Feb      Mar      Apr      May      Jun      Jul      Aug
1985                                                                        
1986 75.20659 72.25139 69.78139 67.80161 66.26051 65.08665 64.20747 63.55787
1987 62.19281 62.10513 62.04370 62.00087 61.97114 61.95058 61.93643 61.92672
          Sep      Oct      Nov      Dec
1985          84.27178 81.81321 78.51797
1986 63.08323 62.73971 62.49309 62.31731
1987 61.92009                           

$se
           Jan       Feb       Mar       Apr       May       Jun       Jul
1985                                                                      
1986 23.410705 25.288870 26.425340 27.090863 27.469631 27.679844 27.793943
1987 27.917314 27.918328 27.918821 27.919058 27.919172 27.919226 27.919251
           Aug       Sep       Oct       Nov       Dec
1985                      9.502359 15.901825 20.424515
1986 27.854666 27.886424 27.902778 27.911083 27.915248
1987 27.919263 27.919268                              </code></pre>
</div>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(rec)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Aula06_files/figure-html/unnamed-chunk-25-2.png" class="img-fluid" style="width:80.0%"></p>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../semanas/Aula05.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Aula 05</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Baseado em https://sta210-s22.github.io/website/</div>   
  </div>
</footer>



</body></html>